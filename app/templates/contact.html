{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script>
        function expiredCallback() {
            alert('Captcha response expired. please try again!');
        }
    </script>
    <script type="text/javascript">
        var _smartsupp = _smartsupp || {};
        _smartsupp.key = 'f07c4500048940adbffbae5f4d03fc0739ce7132';
        window.smartsupp || (function (d) {
            var s, c, o = smartsupp = function () { o._.push(arguments) }; o._ = [];
            s = d.getElementsByTagName('script')[0]; c = d.createElement('script');
            c.type = 'text/javascript'; c.charset = 'utf-8'; c.async = true;
            c.src = 'https://www.smartsuppchat.com/loader.js?'; s.parentNode.insertBefore(c, s);
        })(document);
    </script>
    <meta charset="utf-8">
    <meta name="description" content="Nextcoin">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="keywords" content="HTML,CSS,JavaScript">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>ExchangeVista </title>
    <!-- Google font file -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,900" rel="stylesheet">
    <!-- Favicon-->
    <link rel="icon" href="{% static 'img/favicon.png' %}">
    <link rel="apple-touch-icon" href="{% static 'img/touch/homescreen96.png' %}">
    <link rel="apple-touch-icon" sizes="144x144" href="{% static 'img/touch/homescreen144.png' %}">
    <link rel="apple-touch-icon" sizes="168x168" href="{% static 'img/touch/homescreen168.png' %}">
    <link rel="apple-touch-icon" sizes="192x192" href="{% static 'img/touch/homescreen192.png' %}">
    <!-- Stylesheet-->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" type="text/css" media="all" />
    <link rel="stylesheet" href="{% static 'css/animate.min.css' %}" type="text/css" media="all" />
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}" type="text/css" media="all" />
    <link rel="stylesheet" href="{% static 'css/jquery.jConveyorTicker.min.css' %}" type="text/css" media="all" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" type="text/css" media="all" />
    <!-- Web App Manifest-->
    <link rel="manifest" href="{% static 'manifest.json' %}">
</head>
<body>
    <!-- Page loader -->
    <div id="loader-page">
        <div class="loader" id="line">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
    <!-- Header Section -->
    <header class="header-main">
        <div class="container">
            <div class="content-header d-flex align-items-center justify-content-between">
                <div class="navbar-menu-toggler navbar-btn">
                    <a href="javascript:history.back()">
                        <svg version="1.1" width="18" height="18" fill="currentColor" xmlns="http://www.w3.org/2000/svg"
                            x="0px" y="0px" viewBox="0 0 492 492" style="enable-background:new 0 0 492 492;"
                            xml:space="preserve">
                            <path d="M198.608,246.104L382.664,62.04c5.068-5.056,7.856-11.816,7.856-19.024c0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12
                    			C361.476,2.792,354.712,0,347.504,0s-13.964,2.792-19.028,7.864L109.328,227.008c-5.084,5.08-7.868,11.868-7.848,19.084
                    			c-0.02,7.248,2.76,14.028,7.848,19.112l218.944,218.932c5.064,5.072,11.82,7.864,19.032,7.864c7.208,0,13.964-2.792,19.032-7.864
                    			l16.124-16.12c10.492-10.492,10.492-27.572,0-38.06L198.608,246.104z" />
                        </svg>
                    </a>
                </div>
                <div class="item-options">
                    <div class="item-notification icon-effect me-3">
                        <a href="{% url 'notifications' %}">
                            <svg enable-background="new 0 0 512 512" fill="currentColor" viewBox="0 0 512 512"
                                width="20" height="20" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="m411 262.862v-47.862c0-69.822-46.411-129.001-110-148.33v-21.67c0-24.813-20.187-45-45-45s-45 20.187-45 45v21.67c-63.59 19.329-110 78.507-110 148.33v47.862c0 61.332-23.378 119.488-65.827 163.756-4.16 4.338-5.329 10.739-2.971 16.267s7.788 9.115 13.798 9.115h136.509c6.968 34.192 37.272 60 73.491 60 36.22 0 66.522-25.808 73.491-60h136.509c6.01 0 11.439-3.587 13.797-9.115s1.189-11.929-2.97-16.267c-42.449-44.268-65.827-102.425-65.827-163.756zm-170-217.862c0-8.271 6.729-15 15-15s15 6.729 15 15v15.728c-4.937-.476-9.94-.728-15-.728s-10.063.252-15 .728zm15 437c-19.555 0-36.228-12.541-42.42-30h84.84c-6.192 17.459-22.865 30-42.42 30zm-177.67-60c34.161-45.792 52.67-101.208 52.67-159.138v-47.862c0-68.925 56.075-125 125-125s125 56.075 125 125v47.862c0 57.93 18.509 113.346 52.671 159.138z" />
                                <path
                                    d="m451 215c0 8.284 6.716 15 15 15s15-6.716 15-15c0-60.1-23.404-116.603-65.901-159.1-5.857-5.857-15.355-5.858-21.213 0s-5.858 15.355 0 21.213c36.831 36.831 57.114 85.8 57.114 137.887z" />
                                <path
                                    d="m46 230c8.284 0 15-6.716 15-15 0-52.086 20.284-101.055 57.114-137.886 5.858-5.858 5.858-15.355 0-21.213-5.857-5.858-15.355-5.858-21.213 0-42.497 42.497-65.901 98.999-65.901 159.099 0 8.284 6.716 15 15 15z" />
                            </svg>
                            <span class="count-notif"></span>
                        </a>
                    </div>
                    <div class="avatar-item">
                        <a href="{% url 'profile' %}"><img src="{{ dp }}"></a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Main Section -->
    <main class="main-content">
        <div class="container">
            <div class="contact-item">
                <h4 class="main-title py-4">Contact Us</h4>
                <div class="contact-info-card pb-4">
                    <div class="d-flex align-items-center mb-3">
                        <div class="flex-shrink-0">
                            <svg fill="currentColor"  width="25" height="25"
                                viewBox="0 0 479.058 479.058"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="m434.146 59.882h-389.234c-24.766 0-44.912 20.146-44.912 44.912v269.47c0 24.766 20.146 44.912 44.912 44.912h389.234c24.766 0 44.912-20.146 44.912-44.912v-269.47c0-24.766-20.146-44.912-44.912-44.912zm0 29.941c2.034 0 3.969.422 5.738 1.159l-200.355 173.649-200.356-173.649c1.769-.736 3.704-1.159 5.738-1.159zm0 299.411h-389.234c-8.26 0-14.971-6.71-14.971-14.971v-251.648l199.778 173.141c2.822 2.441 6.316 3.655 9.81 3.655s6.988-1.213 9.81-3.655l199.778-173.141v251.649c-.001 8.26-6.711 14.97-14.971 14.97z"/>
                            </svg>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <h5 class="mb-1 fs-16">Email</h5>
                            <span class="text-gray fs-14">support@exchangevista.com </span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center mb-3">
                        <div class="flex-shrink-0">
                            <svg fill="currentColor" width="25" height="25"
                                viewBox="0 0 512 512"
                                xmlns="http://www.w3.org/2000/svg">
                                <g>
                                    <path d="m256.001 512c-11.176 0-21.184-5.796-26.77-15.505-.059-.102-.116-.205-.173-.308l-126.962-232.386c-30.306-55.471-29.437-121.312 2.325-176.124 31.073-53.624 86.265-86.385 147.639-87.637 2.622-.054 5.258-.054 7.878 0 61.375 1.252 116.567 34.013 147.641 87.637 31.762 54.812 32.631 120.652 2.325 176.124l-126.962 232.386c-.057.103-.114.206-.173.308-5.585 9.708-15.592 15.505-26.768 15.505zm-.001-480c-1.099 0-2.195.011-3.289.033-50.099 1.022-95.185 27.821-120.604 71.688-26.107 45.055-26.829 99.162-1.93 144.736l125.823 230.3 125.822-230.299c24.899-45.575 24.178-99.682-1.931-144.737-25.419-43.866-70.505-70.666-120.604-71.688-1.091-.022-2.188-.033-3.287-.033z"/>
                                    <path d="m256 232c-39.701 0-72-32.299-72-72s32.299-72 72-72 72 32.299 72 72-32.298 72-72 72zm0-112c-22.056 0-40 17.944-40 40s17.944 40 40 40 40-17.944 40-40-17.944-40-40-40z"/>
                                </g>
                            </svg>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <h5 class="mb-1 fs-16">Our Location</h5>
                            <span class="text-gray fs-14"> 625  Glory gate, Glasgow, United Kingdom</span><br>
                            <span class="text-gray fs-14"> 321  The Garden Street, Delaware, USA</span>
                        </div>
                    </div>
                </div>
                <div class="contact-form">
                    <form action="#" id="contactForm">{% csrf_token %}
                        <div class="form-group position-relative">
                            <input type="text" class="form-control" id="name" name="name"  placeholder="Full name"
                                required>
                        </div>
                        <div class="form-group position-relative">
                            <input type="email" class="form-control" name="email" id="email"  placeholder="Email" required>
                        </div>
                        <div class="form-group position-relative">
                            <input name="subject" type="text" class="form-control" placeholder="Subject" required>
                        </div>
                        <div class="form-group position-relative">
                            <textarea class="form-control" name="message" id="message" cols="30" rows="5" placeholder="Message" required></textarea>
                        </div>
                        <div class="col-12">
                            <div data-expired-callback="expiredCallback" class="g-recaptcha" data-type="checkbox" data-sitekey="6LeG4CgqAAAAAJCB8kOWot6ooWYYMs9fjO-2txKv"></div>
                        </div>
                        <div class="form-group">
                            <button class="btn btn-main btn-lg w-100" id="submitButton" type="submit">Send</button>
                            <audio id="successSound">
                                <source src="{% static 'sounds/success.mp3' %}" type="audio/mpeg">
                                Not supported by your browser.
                            </audio>
                            <div class="toast toast-msg" id="msg" role="alert" aria-live="assertive" aria-atomic="true">
                                <div class="toast-body">
                                </div>
                            </div>
                        </div>
                    </form>
                    <p id="response" class="form-message mt-4"></p>
                </div>
            </div>
        </div>
    </main>


    <script>
        const contactForm = document.getElementById('contactForm');
        const button = document.getElementById('submitButton');
        const response = document.getElementById('response');
        const sound = document.getElementById('successSound');

        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrftoken = getCookie('csrftoken');

        contactForm.addEventListener('submit', async function (e) {
            e.preventDefault();
            response.style.transition = '.2s ease-in-out';
            response.style.display = 'none';
            const formElements = this.elements;
            for (let i = 0; i < formElements.length; i++) {
                if (formElements[i].type !== 'submit' && formElements[i].value === '') {
                    if (formElements[i].name === 'email') {
                        response.innerHTML = '<strong style="color: red;"> Please enter your email address </strong>';
                    }
                    else if (formElements[i].name === 'name') {
                        response.innerHTML = '<strong style="color: red;"> Please enter your full name </strong>';
                    }
                    else if (formElements[i].name === 'subject') {
                        response.innerHTML = '<strong style="color: red;"> Please enter your message subject </strong>';
                    }
                    else if (formElements[i].name === 'message') {
                        response.innerHTML = '<strong style="color: red;"> You cannot submit our contact form without a detailed message. </strong>';
                    }
                    else if (formElements[i].name === 'g-recaptcha-response') {
                        response.innerHTML = '<strong style="color: red;"> Please solve the captcha challenge </strong>';
                    }
                    response.style.display = 'block'
                    return false;
                }
            }
            if (formElements['name'].value.length < 5) {
                response.innerHTML = '<strong style="color: red;"> Please enter your full name. </strong>';
                response.style.display = 'block'
                return false;
            }
            if (formElements['message'].value.length < 60) {
                response.innerHTML = '<strong style="color: red;"> Your message must contain at least 60 characters. </strong>';
                response.style.display = 'block'
                return false;
            }
            button.style.opacity = 0.2;

            const formData = new FormData(this);
            fetch('{% url "contact" %}', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': csrftoken
                }
            })
            .then(response => {
                console.log(response);
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    button.style.opacity = 1;
                    response.innerHTML = `<strong style="color: greenyellow;">${data.success}</strong>`;
                    response.style.display = 'block'
                    contactForm.reset();
                    sound.play();
                }
                else {
                    alert(data.error);
                    console.log(data.error);
                }

            })
            .catch(error => console.log('Error occured: ' + error))
            .finally(() => {
                button.style.opacity = 1;
            })

        })
    </script>
    <!-- JQuery library file -->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/jquery.jConveyorTicker.js' %}"></script>
    <!-- charts js-->
    <script src="{% static 'js/chart.min.js' %}"></script>
    <script src="{% static 'js/chart-custom.js' %}"></script>
    <script src="{% static 'js/script.js' %}"></script>
    <script src="{% static 'js/pwa.js' %}"></script>
</body>
</html>